{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/gusta/Desktop/acessar-um-banco/clientes/livros-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Livro } from '../model/livro';\nimport * as i0 from \"@angular/core\";\nconst baseURL = \"http://localhost:3030/livros\";\nclass ControleLivrosService {\n  constructor() {}\n  obterLivros() {\n    return _asyncToGenerator(function* () {\n      const resposta = yield fetch(baseURL);\n      const dados = yield resposta.json();\n      return dados.map(item => new Livro(item._id, item.codEditora, item.titulo, item.resumo, item.autores));\n    })();\n  }\n  incluir(livro) {\n    return _asyncToGenerator(function* () {\n      const resposta = yield fetch(baseURL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          _id: livro.codigo,\n          codEditora: livro.codEditora,\n          titulo: livro.titulo,\n          resumo: livro.resumo,\n          autores: livro.autores\n        })\n      });\n      return resposta.ok;\n    })();\n  }\n  excluir(codigo) {\n    return _asyncToGenerator(function* () {\n      const resposta = yield fetch(`${baseURL}/${codigo}`, {\n        method: 'DELETE'\n      });\n      return resposta.ok;\n    })();\n  }\n}\nControleLivrosService.ɵfac = function ControleLivrosService_Factory(t) {\n  return new (t || ControleLivrosService)();\n};\nControleLivrosService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ControleLivrosService,\n  factory: ControleLivrosService.ɵfac,\n  providedIn: 'root'\n});\nexport { ControleLivrosService };","map":{"version":3,"names":["Livro","baseURL","ControleLivrosService","constructor","obterLivros","_asyncToGenerator","resposta","fetch","dados","json","map","item","_id","codEditora","titulo","resumo","autores","incluir","livro","method","headers","body","JSON","stringify","codigo","ok","excluir","factory","ɵfac","providedIn"],"sources":["C:\\Users\\gusta\\Desktop\\acessar-um-banco\\clientes\\livros-angular\\src\\app\\services\\controle-livros.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Livro } from '../model/livro';\n\n\ninterface LivroMongo {\n  _id: string | null;\n  codEditora: number;\n  titulo: string;\n  resumo: string;\n  autores: string[];\n}\n\nconst baseURL = \"http://localhost:3030/livros\"; \n\n@Injectable({\n  providedIn: 'root'\n})\nexport class ControleLivrosService {\n\n  constructor() { }\n\n  async obterLivros(): Promise<Livro[]> {\n    const resposta = await fetch(baseURL);\n    const dados = await resposta.json();\n    return dados.map((item: LivroMongo) => new Livro(item._id, item.codEditora, item.titulo, item.resumo, item.autores));\n  }\n\n  async incluir(livro: Livro): Promise<boolean> {\n    const resposta = await fetch(baseURL, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        _id: livro.codigo,\n        codEditora: livro.codEditora,\n        titulo: livro.titulo,\n        resumo: livro.resumo,\n        autores: livro.autores\n      } as LivroMongo)\n    });\n    return resposta.ok;\n  }\n\n  async excluir(codigo: string): Promise<boolean> {\n    const resposta = await fetch(`${baseURL}/${codigo}`, {\n      method: 'DELETE'\n    });\n    return resposta.ok;\n  }\n}\n\n"],"mappings":";AACA,SAASA,KAAK,QAAQ,gBAAgB;;AAWtC,MAAMC,OAAO,GAAG,8BAA8B;AAE9C,MAGaC,qBAAqB;EAEhCC,YAAA,GAAgB;EAEVC,WAAWA,CAAA;IAAA,OAAAC,iBAAA;MACf,MAAMC,QAAQ,SAASC,KAAK,CAACN,OAAO,CAAC;MACrC,MAAMO,KAAK,SAASF,QAAQ,CAACG,IAAI,EAAE;MACnC,OAAOD,KAAK,CAACE,GAAG,CAAEC,IAAgB,IAAK,IAAIX,KAAK,CAACW,IAAI,CAACC,GAAG,EAAED,IAAI,CAACE,UAAU,EAAEF,IAAI,CAACG,MAAM,EAAEH,IAAI,CAACI,MAAM,EAAEJ,IAAI,CAACK,OAAO,CAAC,CAAC;IAAC;EACvH;EAEMC,OAAOA,CAACC,KAAY;IAAA,OAAAb,iBAAA;MACxB,MAAMC,QAAQ,SAASC,KAAK,CAACN,OAAO,EAAE;QACpCkB,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;SACjB;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UACnBX,GAAG,EAAEM,KAAK,CAACM,MAAM;UACjBX,UAAU,EAAEK,KAAK,CAACL,UAAU;UAC5BC,MAAM,EAAEI,KAAK,CAACJ,MAAM;UACpBC,MAAM,EAAEG,KAAK,CAACH,MAAM;UACpBC,OAAO,EAAEE,KAAK,CAACF;SACF;OAChB,CAAC;MACF,OAAOV,QAAQ,CAACmB,EAAE;IAAC;EACrB;EAEMC,OAAOA,CAACF,MAAc;IAAA,OAAAnB,iBAAA;MAC1B,MAAMC,QAAQ,SAASC,KAAK,CAAC,GAAGN,OAAO,IAAIuB,MAAM,EAAE,EAAE;QACnDL,MAAM,EAAE;OACT,CAAC;MACF,OAAOb,QAAQ,CAACmB,EAAE;IAAC;EACrB;;AAhCWvB,qBAAqB,C;mBAArBA,qBAAqB;AAAA;AAArBA,qBAAqB,C;SAArBA,qBAAqB;EAAAyB,OAAA,EAArBzB,qBAAqB,CAAA0B,IAAA;EAAAC,UAAA,EAFpB;AAAM;SAEP3B,qBAAqB"},"metadata":{},"sourceType":"module","externalDependencies":[]}